apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Reference base configuration

# Namespace for dev environment
namespace: flowise-dev

# Common labels for dev
commonLabels:
  environment: dev

# Additional resources for dev
resources:
- ingress.yaml
- ../../base

# Images will be updated by GitHub Actions
# kustomize edit set image flowise-server=...
# kustomize edit set image flowise-ui=...
images:
- digest: sha256:5075aae264360e1e3203cdf84250c0cd59c276122ee207a889c4b351a4fbf9ac
  name: flowise-server
  newName: 372836560690.dkr.ecr.ap-southeast-1.amazonaws.com/flowise-server
- digest: sha256:df54a65a5d7f10f32a7c083a8f152e520e81d54ed82d146011bd51357e44362f
  name: flowise-ui
  newName: 372836560690.dkr.ecr.ap-southeast-1.amazonaws.com/flowise-ui

# ConfigMap generator for dev-specific config
configMapGenerator:
- literals:
  - ENVIRONMENT=dev
  - LOG_LEVEL=debug
  - DEBUG=true
  name: flowise-env

# Secret generator for dev (use sealed-secrets or external-secrets in production)
secretGenerator:
- literals:
  - database-host=postgres.flowise-dev.svc.cluster.local
  - database-user=flowise_dev
  - database-password=dev-password-123
  name: flowise-secrets
